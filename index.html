<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIMPIEZA-360PRO-APP - Gesti칩n de Propiedades</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase v8.x scripts (web cl치sica, sin m칩dulos) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
</head>
<body>
    <div id="app">
        <!-- MEN칔 HAMBURGUESA PROFESIONAL -->
        <nav id="mainNav" class="main-nav">
            <div class="nav-header">
                <img src="logo.svg" alt="Logo" class="nav-logo" />
                <button id="hamburgerBtn" class="hamburger" aria-label="Abrir men칰">
                    <span></span><span></span><span></span>
                </button>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="#" id="navDashboard">Dashboard</a></li>
                <li><a href="#" id="navTasks">Tareas</a></li>
                <li><a href="#" id="navInventory">Inventario</a></li>
                <li><a href="#" id="navReports">Reportes</a></li>
                <li><a href="#" id="navUsers">Usuarios</a></li>
                <li><a href="#" id="navSettings">Configuraci칩n</a></li>
                <li><a href="#" id="navLogout">Cerrar sesi칩n</a></li>
            </ul>
        </nav>

        <!-- VISTAS PRINCIPALES (solo placeholders, se mostrar치n seg칰n el usuario) -->
        <main id="mainContent">
            <section id="ownerView" class="view">
                                                                <!-- Formulario para agregar reporte -->
                                                                <form id="addReportForm" class="owner-form">
                                                                    <h3>Agregar reporte</h3>
                                                                    <input type="text" id="reportTitle" placeholder="T칤tulo del reporte" required />
                                                                    <select id="reportType" required>
                                                                        <option value="">Tipo de reporte</option>
                                                                        <option value="inventario">Inventario</option>
                                                                        <option value="tarea">Tarea</option>
                                                                        <option value="otro">Otro</option>
                                                                    </select>
                                                                    <select id="reportProperty" required>
                                                                        <option value="">Asignar a propiedad</option>
                                                                    </select>
                                                                    <textarea id="reportDesc" placeholder="Descripci칩n" rows="2" class="resize-vertical"></textarea>
                                                                    <button type="submit">Agregar reporte</button>
                                                                </form>
                                                <!-- Formulario para agregar inventario -->
                                                <form id="addInventoryForm" class="owner-form">
                                                    <h3>Agregar art칤culo de inventario</h3>
                                                    <input type="text" id="inventoryName" placeholder="Nombre del art칤culo" required />
                                                    <input type="number" id="inventoryQty" placeholder="Cantidad" min="1" required />
                                                    <select id="inventoryProperty" required>
                                                        <option value="">Asignar a propiedad</option>
                                                    </select>
                                                    <button type="submit">Agregar art칤culo</button>
                                                </form>
                                                <div id="inventoryList" class="owner-list">
                                                    <!-- Aqu칤 se listar치 el inventario -->
                                                </div>
                                                <!-- Reportes -->
                                                <div id="reportsList" class="owner-list">
                                                    <!-- Aqu칤 se listar치n los reportes -->
                                                </div>
                                <!-- Formulario para agregar tarea -->
                                <form id="addTaskForm" class="owner-form">
                                    <h3>Agregar tarea</h3>
                                    <input type="text" id="taskTitle" placeholder="T칤tulo de la tarea" required />
                                    <textarea id="taskDesc" placeholder="Descripci칩n" rows="2" class="resize-vertical"></textarea>
                                    <select id="taskProperty" required>
                                        <option value="">Asignar a propiedad</option>
                                    </select>
                                    <select id="taskUser" required>
                                        <option value="">Asignar a usuario</option>
                                    </select>
                                    <button type="submit">Agregar tarea</button>
                                </form>
                                <div id="tasksList" class="owner-list">
                                    <!-- Aqu칤 se listar치n las tareas -->
                                </div>
                <h2 class="dashboard-title">Panel de Due침o</h2>
                <div class="dashboard-welcome">Bienvenido, due침o. Aqu칤 puedes gestionar propiedades y usuarios.</div>

                <div class="dashboard-grid">
                  <!-- Tarjeta de Propiedades -->
                  <div class="dashboard-card">
                    <h3 class="card-title">游 Propiedades</h3>
                    <form id="addPropertyForm" class="owner-form card-form">
                        <input type="text" id="propertyName" placeholder="Nombre de la propiedad" required />
                        <input type="text" id="propertyAddress" placeholder="Direcci칩n" required />
                        <button type="submit" class="btn-primary">Agregar propiedad</button>
                    </form>
                    <div id="propertiesList" class="owner-list card-list">
                        <!-- Aqu칤 se listar치n las propiedades -->
                    </div>
                  </div>

                  <!-- Tarjeta de Usuarios -->
                  <div class="dashboard-card">
                    <h3 class="card-title">游논 Usuarios</h3>
                    <form id="addUserForm" class="owner-form card-form">
                        <input type="text" id="userName" placeholder="Nombre completo" required />
                        <input type="email" id="userEmail" placeholder="Correo electr칩nico" required />
                        <select id="userRole" required>
                            <option value="">Selecciona rol</option>
                            <option value="manager">Manager</option>
                            <option value="employee">Empleado</option>
                        </select>
                        <select id="userProperty" required>
                            <option value="">Asignar a propiedad</option>
                            <!-- Opciones din치micas -->
                        </select>
                        <button type="submit" class="btn-primary">Agregar usuario</button>
                    </form>
                    <div id="usersList" class="owner-list card-list">
                        <!-- Aqu칤 se listar치n los usuarios -->
                    </div>
                  </div>

                  <!-- Tarjeta de Tareas -->
                  <div class="dashboard-card">
                    <h3 class="card-title">游닇 Tareas</h3>
                    <form id="addTaskForm" class="owner-form card-form">
                        <input type="text" id="taskTitle" placeholder="T칤tulo de la tarea" required />
                        <select id="taskProperty" required>
                            <option value="">Asignar a propiedad</option>
                            <!-- Opciones din치micas -->
                        </select>
                        <button type="submit" class="btn-primary">Agregar tarea</button>
                    </form>
                    <div id="tasksList" class="owner-list card-list">
                        <!-- Aqu칤 se listar치n las tareas -->
                    </div>
                  </div>
                </div>
            </section>
            <section id="managerView" class="view">
                                                                <div id="reportsListManager" class="owner-list">
                                                                    <!-- Aqu칤 se listar치n los reportes del manager -->
                                                                </div>
                                                <!-- Formulario para agregar reporte (manager) -->
                                                <form id="addReportFormManager" class="owner-form">
                                                    <h3>Agregar reporte</h3>
                                                    <input type="text" id="reportTitleManager" placeholder="T칤tulo del reporte" required />
                                                    <select id="reportTypeManager" required>
                                                        <option value="">Tipo de reporte</option>
                                                        <option value="inventario">Inventario</option>
                                                        <option value="tarea">Tarea</option>
                                                        <option value="otro">Otro</option>
                                                    </select>
                                                    <textarea id="reportDescManager" placeholder="Descripci칩n" rows="2" class="resize-vertical"></textarea>
                                                    <button type="submit">Agregar reporte</button>
                                                </form>
                                <!-- Formulario para agregar inventario (manager) -->
                                <form id="addInventoryFormManager" class="owner-form">
                                    <h3>Agregar art칤culo de inventario</h3>
                                    <input type="text" id="inventoryNameManager" placeholder="Nombre del art칤culo" required />
                                    <input type="number" id="inventoryQtyManager" placeholder="Cantidad" min="1" required />
                                    <button type="submit">Agregar art칤culo</button>
                                </form>
                                <div id="inventoryListManager" class="owner-list">
                                    <!-- Aqu칤 se listar치 el inventario del manager -->
                                </div>
                <h2>Panel de Manager</h2>
                <div class="dashboard-placeholder">Bienvenido, manager. Aqu칤 ver치s tareas, inventario y reportes.</div>
            </section>
            <section id="employeeView" class="view">
                                <!-- Formulario para agregar reporte (empleado) -->
                                <form id="addReportFormEmployee" class="owner-form">
                                    <h3>Agregar reporte</h3>
                                    <input type="text" id="reportTitleEmployee" placeholder="T칤tulo del reporte" required />
                                    <select id="reportTypeEmployee" required>
                                        <option value="">Tipo de reporte</option>
                                        <option value="inventario">Inventario</option>
                                        <option value="tarea">Tarea</option>
                                        <option value="otro">Otro</option>
                                    </select>
                                    <textarea id="reportDescEmployee" placeholder="Descripci칩n" rows="2" class="resize-vertical"></textarea>
                                    <button type="submit">Agregar reporte</button>
                                </form>
                                <div id="reportsListEmployee" class="owner-list">
                                    <!-- Aqu칤 se listar치n los reportes del empleado -->
                                </div>
                <h2>Panel de Empleado</h2>
                <div class="dashboard-placeholder">Bienvenido, empleado. Aqu칤 ver치s tus tareas asignadas y tu historial.</div>
            </section>
        </main>

        <!-- LOGIN NUEVO CON FIREBASE AUTH -->
        <div id="loginView" class="view login-gradient-center">
            <style>
                @keyframes gradientMove {
                    0% { background-position: 0% 50%; }
                    100% { background-position: 100% 50%; }
                }
                .login-container-pro {
                    max-width: 420px; width: 100%; background: #fff; border-radius: 22px; box-shadow: 0 12px 40px #1e3a8a44; padding: 2.7rem 2.2rem; display: flex; flex-direction: column; align-items: center; position: relative;
                }
                .login-logo {
                    margin-bottom: 1.2rem; border-radius: 50%; box-shadow: 0 4px 18px #1e3a8a33; width: 110px; height: 110px; object-fit: cover;
                }
                .login-title {
                    margin: 0; color: #1E3A8A; font-size: 2.2rem; font-weight: 800; text-align: center; letter-spacing: 1.5px;
                }
                .login-subtitle {
                    color: #2563eb; font-size: 1.15rem; margin: 0.7rem 0 2.2rem 0; text-align: center; font-weight: 500;
                }
                .login-form-pro {
                    width: 100%; display: flex; flex-direction: column; gap: 1.7rem;
                }
                .form-group-pro {
                    display: flex; flex-direction: column; gap: 0.5rem;
                }
                .form-group-pro label {
                    font-weight: 600; color: #1E3A8A; font-size: 1.05rem; display: flex; align-items: center; gap: 0.5rem;
                }
                .form-group-pro label .icon {
                    font-size: 1.2rem;
                }
                .form-group-pro input {
                    padding: 0.85rem 1.1rem; border-radius: 10px; border: 1.5px solid #dbeafe; font-size: 1.08rem; transition: border 0.2s, box-shadow 0.2s;
                }
                .form-group-pro input:focus {
                    border-color: #2563eb; box-shadow: 0 0 0 2px #60A5FA44;
                }
                .btn-primary-pro {
                    background: linear-gradient(90deg, #1E3A8A 0%, #60A5FA 100%); color: #fff; font-weight: 700; font-size: 1.15rem; border: none; border-radius: 10px; padding: 1rem 0; box-shadow: 0 2px 12px #1e3a8a22; cursor: pointer; transition: transform 0.15s, box-shadow 0.15s;
                }
                .btn-primary-pro:hover {
                    transform: translateY(-2px) scale(1.03); box-shadow: 0 6px 18px #1e3a8a33;
                    background: linear-gradient(90deg, #2563eb 0%, #60A5FA 100%);
                }
                .loginError-pro {
                    color: #e00; margin-top: 1.5rem; display: none; font-size: 1.05rem; text-align: center;
                }
                .login-footer-pro {
                    margin-top: 2.2rem; text-align: center; color: #6b7280; font-size: 1rem; font-weight: 500;
                }
            </style>
            <div class="login-container-pro">
                <img src="logo-new.png?v=1" alt="LIMPIEZA-360PRO-APP" class="login-logo">
                <h1 class="login-title">LIMPIEZA-360PRO-APP</h1>
                <p class="login-subtitle">Bienvenido a la plataforma profesional de gesti칩n y limpieza.<br>Acceso seguro para propietarios, managers y empleados.</p>
                <form id="firebaseLoginForm" autocomplete="on" class="login-form-pro">
                    <div class="form-group-pro">
                        <label for="loginEmail"><span class="icon">游닎</span>Email</label>
                        <input type="email" id="loginEmail" placeholder="Tu correo electr칩nico" required autocomplete="username">
                    </div>
                    <div class="form-group-pro">
                        <label for="loginPassword"><span class="icon">游</span>Contrase침a</label>
                        <input type="password" id="loginPassword" placeholder="Tu contrase침a" required autocomplete="current-password">
                    </div>
                    <button type="submit" class="btn-primary-pro">Ingresar</button>
                </form>
                <div id="loginError" class="loginError-pro"></div>
                <div class="login-footer-pro">
                    쯆lvidaste tu contrase침a? <span class="text-accent">Contacta al administrador.</span>
                </div>
            </div>
        </div>

        <!-- VISTA DUE칌O -->
        <div id="ownerView" class="view">
    </div>

    <script src="firebase-init.js"></script>
    <script src="app.js"></script>
    <script>
        // Mostrar el login directamente al cargar la p치gina
        window.addEventListener('DOMContentLoaded', function() {
            const loginView = document.getElementById('loginView');
            if (loginView) {
                loginView.style.display = 'block';
            }
            if (typeof updateLoginForm === 'function') updateLoginForm();
        });
    </script>
</body>
</html>
